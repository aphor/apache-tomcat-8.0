<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE document [
  <!ENTITY project SYSTEM "project.xml">
]>
<document url="changelog.html">

  &project;

  <properties>
    <author email="remm@apache.org">Remy Maucherat</author>
    <author email="yoavs@apache.org">Yoav Shapira</author>
    <author email="fhanik@apache.org">Filip Hanik</author>
    <author email="rjung@apache.org">Rainer Jung</author>
    <author email="pero@apache.org">Peter Rossbach</author>
    <title>Changelog</title>
  </properties>

<body>
<section name="Tomcat Trunk">
  <subsection name="Catalina">
    <changelog>
      <update>
        Switch from AnnotationProcessor to InstanceManager. Patch provided by
        David Jecks with modifications by Remy. (remm/fhanik)
      </update>
      <update>
        <rev>620845</rev> and <rev>669119</rev>. Make shutdwn address
        configurable. (jfclere)
      </update>
      <fix>
        <rev>651977</rev> Add some missing control checks to
        <code>ThreadWithAttributes</code>. (markt) 
      </fix>
      <fix>
        <rev>656084</rev> Small performance improvement for NIO. (fhanik) 
      </fix>
      <fix>
        <rev>666232</rev> Prevent NPE during shutdown when logger has been
        shutdown but a component continues to try to log. (fhanik)
      </fix>
      <add>
        <rev>677640</rev> Add a startup class that does not require any
        configuration files. (costin)
      </add>
      <fix>
        <rev>677910</rev> Use platform mbean server by default. (costin)
      </fix>
      <fix>
        <rev>700532</rev> Log if temporary file operations within the CGI
        servlet fail. Make sure header Reader is closed on failure. (markt)
      </fix>
      <fix>
        <rev>707670</rev> Correctly handle timeouts with Comet so events do not
        stop. (fhanik)
      </fix>
      <fix>
        <rev>708541</rev> Delete references to DefaultContext which was removed
        in 6.0.x. (markt)
      </fix>
      <add>
        <rev>709018</rev> Initial implementation of an asynchronous file handler
        for JULI. (fhanik)
      </add>
      <fix>
        <rev>713953</rev> Include name of attribute when logging failure of
        session attribute serializatyion. (mturk)
      </fix>
      <update>
        Improve JNDI realm compatability with Active Directory. (rjung)
      </update>
      <fix>
        Give session thisAccessedTime and lastAccessedTime clear semantics.
        (rjung)
      </fix>
      <add>
        Expose thisAccessedTime via Session interface. (rjung)
      </add>
    </changelog>
  </subsection>
  <subsection name="Coyote">
    <changelog>
      <update><rev>703017</rev> Make Java socket options consistent between NIO
        and JIO connector. Expose all the socket options available on
        <code>java.net.Socket</code> (fhanik)
      </update>
      <fix>
        <bug>46051</bug>: The writer returned by <code>getWriter()</code> now
        conforms to the <code>PrintWriter</code> specification and uses platform
        dependent line endings rather than always using <code>\r\n</code>.
        (markt)
      </fix>
      <add>
        <rev>701902</rev> Add support for full client-cert chains to AJP.
        (billbarker)
      </add>
    </changelog>
  </subsection>
  <subsection name="High Availability">
    <changelog>
      <add>
        Add support for UDP and secure communication to tribes. (fhanik)
      </add>
      <add>
        Add versioning to the tribes communication protocol to support future
        developments. (fhanik)
      </add>
      <add>
        Add a demo on how to use the payload. (fhanik)
      </add>
      <add>
        Started to add JMX support to the cluster implementation. (markt)
      </add>
      <fix>
        <rev>609778</rev> Minor fixes to the throughput interceptor and the
        NIO receiver. (fhanik)
      </fix>
      <fix>
        <rev>630234</rev> Additional checks for the NIO receiver. (fhanik)
      </fix>
      <update>
        <rev>671650</rev> Improve error message when multicast is not enabled.
        (fhanik)
      </update>
    </changelog>
  </subsection>
  <subsection name="Documentation">
     <changelog>
      <update>
        <rev>631321</rev> Update changelog to support the &lt;rev&gt; element.
        (fhanik)
      </update>
    </changelog>
  </subsection>
  <subsection name="Extras">
    <changelog>
      <add>
        A new JmxRemoteLifecycleListener that can be used to fix the ports used
        for remote JMX connections, eg when using JConsole. (markt)
      </add>
    </changelog>
  </subsection>
  <subsection name="Modules">
    <changelog>
      <add>
        <rev>691359</rev> Added in a Bayeux protocol implementation built on top
        of the Tomcat CometProcessor interface. (fhanik)
      </add>
    </changelog>
  </subsection>
  <subsection name="Other">
    <changelog>
      <fix>
        Numerous code clean-up changes including the use of generics and
        removing unused imports, fields, parameters and methods.
      </fix>
      <update>
        Parameterize version number throughout build scripts and source. (rjung)
      </update>
    </changelog>
  </subsection>

<!-- Below this line has not been reviewed as part of the 6.0.x/trunk diff.  -->
  <subsection name="ha">
    <changelog>
      <update>
        Update tc-native to 1.1.15 in build.properties.default (jfclere)
      </update>
     <fix><rev>671650</rev><br/><bug>45279</bug><br/>
       Close multicast socket when calling close
      </fix> 
      <update><rev>649252</rev><br/>
       Expose the alwaysSend flag to be able to configure send behavior when reaching the limit
      </update> 
     <fix><rev>649238</rev><br/><bug>44833</bug><br/>
       Properly override methods from DeltaSession -> StandardSession
      </fix> 
    </changelog>
  </subsection>
  <subsection name="Coyote">
    <changelog>
     <fix><bug>45074</bug>Add configuration parameters in Http11AprProtocol</fix>
     <update><rev>644858</rev><br/>
       Inproper curly brackets cause NIO/SendFile to fail. Workaround prior to this version, set
       useSendFile=&quot;false&quot; in the Connector element.
      </update> 
    </changelog>
  </subsection>
  <subsection name="Catalina">
     <changelog>
     <fix><bug>44809</bug>Improve AprLifecycleListener Error Messages</fix>
     <fix><rev>671973</rev><br/><bug>45272</bug><br/>
       Workaround for IE cookie behavior
      </fix> 
     <update><rev>666232</rev><br/>
       Prevent NPE stacktrace, and lost log message when logger has been shutdown. Instead log the error, with the message (fhanik)
     </update>  
     <update><rev>645184</rev><br/>
       Properly deserialize Proxy classes
     </update>  
     <update><rev>634513</rev><br/>
       <rev>630533</rev>
       Cookies are parsed according to both servlet spec and cookie spec if STRICT_SERVLET_COMPLIANCE is set to 
       true.<br/>
       If false, the default, then values will be quoted for v0 cookies if they contain invalid characters
      </update> 

     <update><rev>631700</rev>
       Revert back to original patch proposed for UTF8 parsing.
       This also fixes the regression for 6.0.16 and 5.5.26 (and possibly 4.1.37) mentioned in
       http://issues.apache.org/bugzilla/show_bug.cgi?id=44494

       The original patch can be viewed
       http://svn.apache.org/viewvc?rev=568307&amp;view=rev
       http://svn.apache.org/viewvc?rev=568605&amp;view=rev
      </update> 
      <fix>ExtendedAccessLogValve cs-uri not print empty querystring (pero)
      </fix>
     </changelog>
  </subsection>
</section>
</body>
</document>
